import{l as m,D as B,ae as E,a7 as H,r as o,a4 as L,u as R,y as h,j as s,I as T,af as $,g as x}from"./index-BEM99ApS.js";import"./lodash-CVdNur_4.js";const F=()=>{var j;const[n,w]=m(B),[P,p]=m(E),[f,U]=m(H),[G,K]=o.useState(!0),[N,I]=o.useState([]),[d,v]=o.useState(""),{state:O}=L(),g=R(),D=sessionStorage.getItem("userId"),k=h(),[u,b]=o.useState({name:null,uid:null,userId:null});o.useEffect(()=>{const e={userId:D};(async()=>{try{const r=await x.get("/api/user",{params:e,headers:{Authorization:`Bearer ${k}`}});console.log(r.data.resultData);const a=r.data.resultData;w({...a}),p(t=>{const c=[...t];return c[0]={name:a.name,uid:a.uid,userId:a.userId},c}),b(t=>{const c=t.userId||[],i=c.includes(a.userId);return{...t,userId:i?c.filter(z=>z!==a.userId):[...c,a.userId]}})}catch(r){console.log(r)}})()},[]),o.useEffect(()=>{(async(l=d)=>{const r=h(),a={companyId:n.companyId,page:1,size:30,name:l};try{const c=(await x.get("/api/user/user-payment-member/searchPeople",{params:a,headers:{Authorization:`Bearer ${r}`}})).data.resultData.memberList.filter(i=>i.userId!==n.userId);I([...c])}catch(t){console.log(t)}})()},[d]);const y=async(e=d)=>{const l=h(),r={companyId:n.companyId,page:1,size:30,name:e};console.log(r);try{const t=(await x.get("/api/user/user-payment-member/searchPeople",{params:r,headers:{Authorization:`Bearer ${l}`}})).data.resultData.memberList.filter(c=>c.userId!==n.userId);I([...t])}catch(a){console.log(a)}},S=e=>{const l=e.target.value;v(l)},M=e=>{e.code==="Enter"&&y()},A=e=>{const l=e.userId;b(r=>{const a=r.userId||[],t=a.includes(l);return{...r,userId:t?a.filter(c=>c!==l):[...a,l]}}),p(r=>{const a=r.filter(t=>t.userId!==l);return a.length===r.length?[...r,e]:a})},C=()=>{g(`/user/placetoorder/price/${f}`,{state:{orderId:f,paymentMember:u}})};return s.jsxs("div",{className:"w-full h-dvh overflow-x-hidden overflow-y-scroll scrollbar-hide",children:[s.jsxs("div",{className:"flex w-full justify-between py-6 items-center border-b border-gray",children:[s.jsx("div",{onClick:()=>g("/user"),className:"flex w-[15%] justify-center",children:s.jsx(T,{className:"text-3xl"})}),s.jsx("span",{className:"text-lg font-semibold",children:"인원 선택"}),s.jsx("div",{className:"w-[15%]",children:s.jsx("span",{className:"bg-primary text-center px-3 py-1 rounded-md text-white",onClick:C,children:"다음"})})]}),s.jsx("div",{className:"flex w-full justify-end p-4",children:s.jsxs("div",{children:["총 ",(j=u==null?void 0:u.userId)==null?void 0:j.length,"명 선택 중"]})}),s.jsxs("div",{className:"w-full h-dvh ",children:[s.jsxs("div",{className:"flex w-full h-[6%] items-center px-6 border-b border-gray",children:[s.jsxs("div",{className:"flex w-[90%] items-center gap-4",children:[s.jsx("input",{type:"checkbox",className:"w-5 h-5",checked:!0,disabled:!0}),s.jsxs("label",{className:"text-xl",children:[n.name,"(",n.uid,")"]})]}),s.jsx("span",{className:"w-[20%] text-darkGray",children:"본인"})]}),s.jsxs("div",{className:"flex flex-col w-full h-dvh",children:[s.jsxs("div",{className:"flex p-6 items-center gap-1",children:[s.jsx("input",{type:"text",className:"w-[90%] border border-darkGray rounded-md px-2",placeholder:"회사 내 인원을 이름으로 검색해보세요",onChange:e=>S(e),onKeyDown:e=>M(e),value:d}),s.jsx($,{onClick:()=>y(),className:"flex w-[10%] text-2xl"})]}),s.jsx("div",{className:"flex flex-col w-full h-full",children:N.map(e=>s.jsxs("div",{className:"flex w-full h-[10%] items-center gap-4 px-6 py-2 border-b border-gray",children:[s.jsx("input",{type:"checkbox",className:"w-5 h-5",id:e.userId,value:e.userId,onChange:()=>A(e)}),s.jsxs("label",{className:"text-xl",htmlFor:e.userId,children:[e.name,"(",e.uid,")"]})]},e.userId))})]})]})]})};export{F as default};
