import{u as F,c as g,o as T,j as e,k as U,m as q,e as A,f as j}from"./index-CQbk2HOI.js";import{o as E,c as P,a as o,d as Y}from"./index.esm-89j8rvzM.js";import{u as z}from"./index.esm-BppKtBuT.js";import{L as H,H as O,C as R,F as Z,T as M,I as r,S as c,Y as l,b as N}from"./loginStyle-DEwExm5v.js";const G=P({adminId:Y(),aid:o().min(6,"최소 6자 이상 작성해야 합니다.").max(12,"최대 12자까지 작성 가능합니다."),apw:o().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),name:o().required("이름은 필수입니다.").min(2,"이름은 최소 2자 이상이어야 합니다."),phone:o().required("전화번호는 필수입니다.").matches(/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/,"전화번호 형식이 올바르지 않습니다.")});function X(){var p,u,x,f;const d=F(),[w,m]=g.useState(!1),[S]=T(),v=S.get("adminId"),{register:t,handleSubmit:y,formState:{errors:n},watch:s,setValue:C}=z({mode:"onChange",resolver:E(G),defaultValues:{phone:""}}),I=s("aid"),b=s("apw"),D=s("name"),V=s("phone"),B=s("adminId"),h=I&&b&&D&&B&&V,$=async a=>{try{await A.put("/api/admin/v3",a),j.fire({title:"회원가입이 완료 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(i=>{i.isConfirmed&&d("/")}),console.log("보낸 데이터??",a)}catch(i){j.fire({title:"회원가입에 실패 하였습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(L=>{L.isConfirmed&&m(!1)}),console.log(i)}},k=async a=>{m(i=>!i),$(a),console.log(a)};return g.useEffect(()=>{C("adminId",v)},[]),e.jsxs("div",{children:[e.jsxs(H,{style:{position:"relative"},children:[e.jsx(O,{children:e.jsx(R,{children:e.jsx(U,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>d(-1)})})}),e.jsx(Z,{children:e.jsxs("form",{onSubmit:y(k),children:[e.jsx(M,{children:"회원가입"}),e.jsxs(r,{children:[e.jsx(c,{type:"text",placeholder:"아이디",...t("aid")}),e.jsx(l,{children:(p=n.aid)==null?void 0:p.message})]}),e.jsxs(r,{children:[e.jsx(c,{type:"password",placeholder:"비밀번호 (8-16자)",...t("apw")}),e.jsx(l,{children:(u=n.apw)==null?void 0:u.message})]}),e.jsxs(r,{children:[e.jsx(c,{type:"text",placeholder:"이름",...t("name")}),e.jsx(l,{children:(x=n.name)==null?void 0:x.message})]}),e.jsxs(r,{children:[e.jsx(c,{type:"tel",placeholder:"휴대전화번호",maxLength:11,...t("phone")}),e.jsx(l,{children:(f=n.phone)==null?void 0:f.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(N,{type:"submit",style:{backgroundColor:h?"#6F4CDB":"#ddd"},disabled:!h,children:"가입하기"})})]})})]}),w&&e.jsx(q,{})]})}export{X as default};
