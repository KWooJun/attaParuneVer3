import{M as v,u as y,c as n,h as g,j as e,_ as b,$ as k,a0 as I,D as C,V as D,e as f}from"./index-CQbk2HOI.js";import{a as G}from"./index-qu_znskc.js";import{M as L}from"./MenuBar-xsBcDoCC.js";import"./index-DEDMgCo3.js";import{d}from"./dayjs.min-CeLsBkk8.js";import"./index-BUmomptc.js";import"./index-kw6KE48s.js";function M(t){return v({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"},child:[]}]})(t)}const P=()=>{const t=y(),[c,i]=n.useState(!0),[h,u]=n.useState([]),[a,p]=n.useState({}),o=window.sessionStorage.getItem("userId"),x=g();n.useEffect(()=>{(async()=>{try{if(o){const r=(await f.get("/api/user/pastOrderCheck",{headers:{Authorization:`Bearer ${x}`}})).data.resultData;u([...r])}}catch(l){console.log(l)}})()},[]),n.useEffect(()=>{const s={userId:o};(async()=>{try{const r=await f.get("/api/user/activeOrderCheck",{params:s,headers:{Authorization:`Bearer ${x}`}});console.log(r.data);const m=r.data.resultData,N=d(m.orderDate).format("YYYY-MM-DD HH:mm");p({...m,orderDate:N})}catch(r){console.log(r)}})()},[]),console.log("진행중인 주문내역 : ",a);const j=s=>{if(a.ticketId)t(`/user/placetoorder/coupon/${s.ticketId}`,{state:{...s}});else return},w=s=>{console.log("리뷰써보자 : ",s),t(`/user/review/${s.orderId}`,{state:{...s}})};return e.jsxs("div",{className:"w-full h-dvh flex flex-col justify-between overflow-x-hidden overflow-y-scroll scrollbar-hide bg-white",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full flex justify-between border-b-2 border-gray border-opacity-70 bg-white",children:[e.jsx("div",{onClick:()=>i(!0),className:`w-1/2 text-center text-xl font-semibold py-3 ${c?"border-b-2 border-black":"text-darkGray font-normal"}`,children:"진행 중인 주문"}),e.jsx("div",{onClick:()=>i(!1),className:`w-1/2 text-center text-xl font-semibold py-3 ${c?"text-darkGray font-normal":"border-b-2 border-black"}`,children:"지난 주문 내역"})]}),c?a.orderId?e.jsxs("div",{className:"flex flex-col w-full h-dvh gap-10",children:[e.jsx("div",{className:"flex w-full h-[14%] justify-center items-end text-primary text-2xl font-semibold tracking-widest",children:a.ticketId?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{}),e.jsx("span",{children:"예약완료"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"#6f4cdb"}),e.jsx("span",{children:"예약중"})]})}),e.jsxs("div",{className:"flex flex-col w-full h-[25%] px-10 gap-5",children:[e.jsx("span",{className:"mb-2",children:"매장 정보"}),e.jsxs("div",{className:"flex flex-col w-full h-full px-4 justify-between",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("span",{className:"text-xl",children:a.restaurantName}),e.jsx("span",{className:"text-darkGray",children:a.categoryName})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("span",{className:"text-darkGray",children:"주문일시"}),e.jsx("span",{className:"text-lg",children:d(a.orderDate).format("YYYY-MM-DD")})]}),a.orderDetails.map(s=>e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("span",{children:s.menuName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{children:[s.menuCount,"개"]}),e.jsxs("span",{children:[s.menuPrice.toLocaleString("ko"),"원"]})]})]},s.menuId)),e.jsxs("div",{className:"flex w-full items-center justify-center gap-6",children:[e.jsx("span",{className:"flex w-[20%] justify-end",children:"총 가격"}),e.jsxs("span",{className:"flex w-[50%] justify-center text-2xl",children:[a.totalMenuCost.toLocaleString("ko"),"원"]}),a.ticketId?e.jsx("div",{onClick:()=>j(a),className:"flex w-[15%] text-3xl justify-start",children:e.jsx(M,{className:"cursor-pointer"})}):e.jsx("div",{className:"flex w-[15%] text-3xl justify-start"})]})]})]}),e.jsxs("div",{className:"flex flex-col w-full h-[30%] px-10 gap-5",children:[e.jsx("span",{className:"mb-2",children:"예약자 정보"}),e.jsxs("div",{className:"flex flex-col w-full h-full px-4 justify-between",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"이름"}),e.jsx("span",{children:a.reservationUserName})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"핸드폰 번호"}),e.jsx("span",{children:a.reservationUserPhone})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"인원"}),e.jsx("span",{})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"예약시간"}),e.jsx("span",{children:a.reservationTime!==null?a.reservationTime:a.orderDate})]})]})]})]}):e.jsxs("div",{className:"flex flex-col w-full h-dvh justify-center items-center gap-3",children:[e.jsx(G,{className:"text-8xl text-darkGray"}),e.jsx("span",{className:"text-2xl text-darkGray",children:"진행 중인 주문이 없습니다"}),e.jsxs("div",{onClick:()=>i(!1),className:"flex items-center gap-1 mt-3 text-xl border border-darkGray px-3 py-1 rounded-lg bg-white cursor-pointer",children:["지난 주문 내역 보기",e.jsx(I,{})]})]}):e.jsx("div",{className:"flex flex-col w-full h-dvh justify-start items-center gap-5 mt-20 scrollbar-hide",children:h.map((s,l)=>e.jsxs("div",{className:"w-full h-1/4 bg-white shadow-lg border-y border-y-gray",children:[e.jsxs("div",{className:"w-full h-1/4 flex justify-between items-center px-5 py-3",children:[e.jsx("span",{className:"text-darkGray",children:d(s.createdAt).format("YYYY-MM-DD")}),e.jsx("span",{className:"font-semibold",children:s.reservationYn>0?"예약주문":"현장결제"})]}),e.jsxs("div",{className:"w-full h-2/4 flex justify-start items-center gap-5 px-5",children:[e.jsx("img",{src:s.pic===null?"/restaurant_default.png":`${C}/pic/restaurant/${s==null?void 0:s.restaurantId}/${s==null?void 0:s.pic}`,alt:"식당이미지",className:"w-16 h-16 rounded-xl border border-neutral-200 object-cover shadow-sm"}),e.jsxs("div",{className:"flex flex-col w-[60%]",children:[e.jsxs("div",{onClick:()=>t(`/user/restaurant/detail/${s.restaurantId}`),className:"flex items-center gap-2 font-semibold text-2xl cursor-pointer",children:[e.jsx("span",{children:s.restaurantName}),e.jsx(D,{})]}),e.jsxs("div",{className:"flex items-center gap-5 mt-1 justify-between",children:[s.pastDtoList.map(r=>e.jsxs("div",{className:"flex w-full gap-4 items-center",children:[e.jsx("span",{className:"text-nowrap",children:r.menuName}),e.jsxs("span",{className:"text-nowrap",children:[r.menuCount,"개"]})]},r.menuId)),e.jsxs("div",{className:"flex text-nowrap gap-2 items-center",children:[e.jsx("span",{className:"text-darkGray",children:"총 가격"}),e.jsxs("span",{className:"text-lg",children:[s.menuTotalPrice.toLocaleString("ko-KR"),"원"]})]})]})]})]}),e.jsx("div",{className:"flex justify-center h-1/4",children:e.jsx("button",{onClick:()=>w(s),className:"w-1/4 h-2/3 flex px-4 py-1 border border-darkGray rounded-sm text-nowrap items-center justify-center hover:bg-primary hover:text-white",children:"리뷰 작성"})})]},l))}),e.jsx(L,{})]})};export{P as default};
