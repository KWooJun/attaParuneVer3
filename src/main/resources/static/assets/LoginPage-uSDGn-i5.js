import{u as T,o as d,H as F,J as E,K as A,r as u,G as B,B as H,j as s,z as N,D as m,E as r,M as U,d as x,N as f,e as _}from"./index-BXJcS394.js";import{u as M}from"./index.esm-Cwsj84Ww.js";import{L as O,H as P,C as V,T as Y,b as z,R as G,F as J,I as j,S,a as K,c as i}from"./loginStyle-LSRyLJ-r.js";function ss(){const n=T(),[q,g]=d(F),[Q,w]=d(E),[W,y]=d(A),[t,p]=u.useState({id:"",pw:""}),[h,I]=u.useState(!1),D=sessionStorage.getItem("userId"),v=sessionStorage.getItem("restaurantId"),{handleSubmit:C}=M(),a=B(H),b=()=>{a===m?n("/user"):a===r&&n("/store")},L=async()=>{try{if(a===m){const e=(await x.post("/api/user/sign-in",t)).data.resultData;y({companyId:e.companyId,companyName:e.companyName,email:e.email,name:e.name,phone:e.phone,pic:e.pic,point:e.point,roleId:e.roleId,uid:e.uid,userId:e.userId}),console.log(e);const l=e.userId||D,c=e.accessToken;window.sessionStorage.setItem("userId",l),f(c),g(!0)}else if(a===r){const o=await x.post("/api/admin/sign-in",t);console.log(o.data.resultData);const e=o.data.resultData,l=e.divisionId||v,c=e.adminId,R=e.accessToken;window.sessionStorage.setItem("adminId",c),window.sessionStorage.setItem("restaurantId",l),f(R),w(!0)}g(!0),b()}catch(o){_.fire({title:"아이디와 비밀번호가 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),console.log(o)}},k=()=>{L()};return u.useEffect(()=>{t.id&&t.pw?I(!0):I(!1)},[t]),s.jsxs(O,{children:[s.jsx(P,{children:s.jsx(V,{children:s.jsx(N,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>n("/")})})}),s.jsxs(Y,{children:[s.jsx(z,{src:"/logo.png",alt:"로고"}),s.jsx(G,{children:a===m?"사용자":a===r?"사장님":a===U?"회사":""})]}),s.jsx(J,{children:s.jsxs("form",{onSubmit:C(k),children:[s.jsx(j,{children:s.jsx(S,{type:"text",placeholder:"아이디",value:t.id,onChange:o=>p({...t,id:o.target.value})})}),s.jsx(j,{children:s.jsx(S,{type:"password",value:t.pw,placeholder:"비밀번호 (8-16자)",onChange:o=>p({...t,pw:o.target.value})})}),s.jsx("div",{style:{marginLeft:20,marginRight:20},children:s.jsx(K,{type:"submit",style:{backgroundColor:h?"#6F4CDB":"#ddd"},disabled:!h,children:"로그인"})})]})}),s.jsx(i,{onClick:()=>n("/auth/findid"),children:"아이디 찾기"}),s.jsx(i,{style:{color:"#bababa"},children:"I"}),s.jsx(i,{onClick:()=>n("/auth/findpw"),children:"비밀번호 찾기"}),a===r&&s.jsxs(s.Fragment,{children:[s.jsx(i,{style:{color:"#bababa"},children:"I"}),s.jsx(i,{style:{marginRight:25},onClick:()=>n("/auth/policy"),children:"회원가입"})]})]})}export{ss as default};
