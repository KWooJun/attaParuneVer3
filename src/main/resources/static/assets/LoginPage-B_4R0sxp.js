import{u as A,R as u,l as U,i as B,b as H,c as m,d as N,r as _,j as s,I as M,U as g,S as l,C as p,a as I,e as d,s as h,f as O}from"./index-CQbk2HOI.js";import{u as Y}from"./index.esm-BppKtBuT.js";import{L as P,H as V,C as q,T as z,a as G,R as J,F as K,I as j,S as y,b as Q,c}from"./loginStyle-DEwExm5v.js";function ts(){const n=A(),[W,x]=u(U),[X,D]=u(B),[Z,C]=u(H),[o,f]=m.useState({id:"",pw:""}),[S,w]=m.useState(!1),v=sessionStorage.getItem("userId"),b=sessionStorage.getItem("restaurantId"),{handleSubmit:k}=Y(),t=N(_),L=()=>{t===g?n("/user"):t===l?n("/store"):t===p?n("/company"):t===I&&n("/admin")},T=async()=>{try{if(t===g){const e=(await d.post("/api/user/sign-in",o)).data.resultData;C({companyId:e.companyId,companyName:e.companyName,email:e.email,name:e.name,phone:e.phone,pic:e.pic,point:e.point,roleId:e.roleId,uid:e.uid,userId:e.userId}),console.log(e);const i=e.userId||v,r=e.accessToken;window.sessionStorage.setItem("userId",i),h(r),x(!0)}else if(t===l){const a=await d.post("/api/admin/sign-in",o);console.log(a.data.resultData);const e=a.data.resultData,i=e.divisionId||b,r=e.adminId,F=e.coalitionState,E=e.accessToken;window.sessionStorage.setItem("adminId",r),window.sessionStorage.setItem("restaurantId",i),window.sessionStorage.setItem("coalitionState",F),h(E),D(!0)}else if(t===p){const a=await d.post("/api/admin/sign-in",o)}else if(t===I){const a=await d.post("/api/admin/sign-in",o);console.log(a.data.resultData);const e=a.data.resultData,i=e.adminId,r=e.accessToken;window.sessionStorage.setItem("adminId",i),h(r)}x(!0),L()}catch(a){O.fire({title:"아이디와 비밀번호가 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),console.log(a)}},R=()=>{T()};return m.useEffect(()=>{o.id&&o.pw?w(!0):w(!1)},[o]),s.jsxs(P,{children:[s.jsx(V,{children:s.jsx(q,{children:s.jsx(M,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>n("/")})})}),s.jsxs(z,{children:[s.jsx(G,{src:"/logo.png",alt:"로고"}),s.jsx(J,{children:t===g?"사용자":t===l?"사장님":t===p?"회사":t===I?"시스템":""})]}),s.jsx(K,{children:s.jsxs("form",{onSubmit:k(R),children:[s.jsx(j,{children:s.jsx(y,{type:"text",placeholder:"아이디",value:o.id,onChange:a=>f({...o,id:a.target.value})})}),s.jsx(j,{children:s.jsx(y,{type:"password",value:o.pw,placeholder:"비밀번호 (8-16자)",onChange:a=>f({...o,pw:a.target.value})})}),s.jsx("div",{style:{marginLeft:20,marginRight:20},children:s.jsx(Q,{type:"submit",style:{backgroundColor:S?"#6F4CDB":"#ddd"},disabled:!S,children:"로그인"})})]})}),s.jsx(c,{onClick:()=>n("/auth/findid"),children:"아이디 찾기"}),s.jsx(c,{style:{color:"#bababa"},children:"I"}),s.jsx(c,{onClick:()=>n("/auth/findpw"),children:"비밀번호 찾기"}),t===l&&s.jsxs(s.Fragment,{children:[s.jsx(c,{style:{color:"#bababa"},children:"I"}),s.jsx(c,{style:{marginRight:25},onClick:()=>n("/auth/policy"),children:"회원가입"})]})]})}export{ts as default};
