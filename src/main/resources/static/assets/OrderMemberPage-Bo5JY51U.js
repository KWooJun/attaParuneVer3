import{R as i,c as $,C as B,D as R,z as H,r as o,E as L,u as T,g as m,j as e,b as x}from"./index-XkiSkCIq.js";import"./lodash-ps-9DWTQ.js";import{I as P,d as U}from"./index-Cu020-X3.js";import"./iconBase-DXw1Gjh5.js";const J=()=>{const[d,w]=i($),[h,p]=i(B),[N,g]=i(R),[b,K]=i(H),[u,f]=o.useState(!0),[v,y]=o.useState([]),[n,k]=o.useState(""),{state:O}=L(),I=T(),D=sessionStorage.getItem("userId"),M=m();o.useEffect(()=>{const s={userId:D};(async()=>{try{const r=await x.get("/api/user",{params:s,headers:{Authorization:`Bearer ${M}`}});console.log(r.data.resultData);const a=r.data.resultData;w({...a}),g(t=>{const l=[...t];return l[0]={name:a.name,uid:a.uid,userId:a.userId},l}),p(t=>{const l=t.userId||[],E=l.includes(a.userId);return{...t,userId:E?l.filter(G=>G!==a.userId):[...l,a.userId]}})}catch(r){console.log(r)}})()},[]),o.useEffect(()=>{(async(c=n)=>{const r=m(),a={companyId:d.companyId,page:1,size:30,name:c};console.log(a);try{const l=(await x.get("/api/user/user-payment-member/searchPeople",{params:a,headers:{Authorization:`Bearer ${r}`}})).data.resultData.memberList;y([...l])}catch(t){console.log(t)}})()},[n]);const j=async(s=n)=>{const c=m(),r={companyId:d.companyId,page:1,size:30,name:s};console.log(r);try{const t=(await x.get("/api/user/user-payment-member/searchPeople",{params:r,headers:{Authorization:`Bearer ${c}`}})).data.resultData.memberList;y([...t])}catch(a){console.log(a)}},S=s=>{const c=s.target.value;k(c)},C=s=>{console.log(s),console.log(n),s.code==="Enter"&&j()},A=s=>{const c=s.userId;p(r=>{const a=r.userId||[],t=a.includes(c);return{...r,userId:t?a.filter(l=>l!==c):[...a,c]}}),g(r=>{const a=r.filter(t=>t.userId!==c);return a.length===r.length?[...r,s]:a})};console.log(h),console.log(N);const z=()=>{I(`/user/placetoorder/price/${b}`,{state:{orderId:b}})};return e.jsxs("div",{className:"w-full h-dvh overflow-x-hidden overflow-y-scroll scrollbar-hide",children:[e.jsxs("div",{className:"flex w-full justify-between py-6 items-center border-b border-gray",children:[e.jsx("div",{onClick:()=>I(-1),className:"flex w-[15%] justify-center",children:e.jsx(P,{className:"text-3xl"})}),e.jsx("span",{className:"text-lg font-semibold",children:"인원 선택"}),e.jsx("div",{className:"w-[15%]",children:e.jsx("span",{className:"bg-primary text-center px-3 py-1 rounded-md text-white",onClick:z,children:"다음"})})]}),e.jsxs("div",{className:"flex w-full justify-between p-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:`${u?"bg-gray text-darkGray text-opacity-60":"bg-darkGray text-black"} px-2 py-1 rounded-s-md font-semibold`,onClick:()=>f(!1),children:"최근"}),e.jsx("span",{className:`${u?"bg-darkGray text-black":"bg-gray text-darkGray text-opacity-60"} px-2 py-1 rounded-e-md font-semibold`,onClick:()=>f(!0),children:"검색"})]}),e.jsxs("div",{children:["총 ",h.userId.length,"명 선택 중"]})]}),e.jsxs("div",{className:"w-full h-dvh ",children:[e.jsxs("div",{className:"flex w-full h-[6%] items-center px-6 border-b border-gray",children:[e.jsxs("div",{className:"flex w-[90%] items-center gap-4",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5",checked:!0,disabled:!0}),e.jsxs("label",{className:"text-xl",children:[d.name,"(",d.uid,")"]})]}),e.jsx("span",{className:"w-[20%] text-darkGray",children:"필수선택"})]}),u?e.jsxs("div",{className:"flex flex-col w-full h-dvh",children:[e.jsxs("div",{className:"flex p-6 items-center gap-1",children:[e.jsx("input",{type:"text",className:"w-[90%] border border-darkGray rounded-md px-2",placeholder:"회사 내 인원을 이름으로 검색해보세요",onChange:s=>S(s),onKeyDown:s=>C(s),value:n}),e.jsx(U,{onClick:()=>j(),className:"flex w-[10%] text-2xl"})]}),e.jsx("div",{className:"flex flex-col w-full h-dvh",children:v.map(s=>e.jsxs("div",{className:"flex w-full h-[6%] items-center gap-4 px-6 border-b border-gray",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5",id:s.userId,value:s.userId,onChange:()=>A(s)}),e.jsxs("label",{className:"text-xl",htmlFor:s.userId,children:[s.name,"(",s.uid,")"]})]},s.userId))})]}):e.jsx("div",{className:"flex flex-col w-full h-dvh",children:e.jsx("span",{className:"p-5 text-xl",children:"최근 함께한 사용자가 없습니다"})})]})]})};export{J as default};
