import{u as y,r as t,g as w,j as e,O as N,P as v,v as g,d as x}from"./index-BXJcS394.js";import{a as b}from"./index-CxsZmhHJ.js";import{M as k}from"./MenuBar-DLMOn1Ja.js";import"./index-Bk8EfdaW.js";import{d as f}from"./dayjs.min-CpBk8O8I.js";import"./index-CowzvnjE.js";import"./index-B2dqu-W3.js";const $=()=>{const i=y(),[n,c]=t.useState(!0),[m,h]=t.useState([]),[a,p]=t.useState({}),d=window.sessionStorage.getItem("userId"),o=w();t.useEffect(()=>{(async()=>{try{if(d){const r=(await x.get("/api/user/pastOrderCheck",{headers:{Authorization:`Bearer ${o}`}})).data.resultData;h([...r])}}catch(l){console.log(l)}})()},[]),t.useEffect(()=>{const s={userId:d};(async()=>{try{const r=await x.get("/api/user/activeOrderCheck",{params:s,headers:{Authorization:`Bearer ${o}`}});console.log(r.data);const j=r.data.resultData;p({...j})}catch(r){console.log(r)}})()},[]),console.log(a);const u=()=>{a.ticketId&&i(`/user/placetoorder/coupon/${a.ticketId}`)};return e.jsxs("div",{className:"w-full h-dvh flex flex-col justify-between overflow-x-hidden overflow-y-scroll scrollbar-hide bg-white",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full flex justify-between border-b-2 border-gray border-opacity-70 bg-white",children:[e.jsx("div",{onClick:()=>c(!0),className:`w-1/2 text-center text-xl font-semibold py-3 ${n?"border-b-2 border-black":"text-darkGray font-normal"}`,children:"진행 중인 주문"}),e.jsx("div",{onClick:()=>c(!1),className:`w-1/2 text-center text-xl font-semibold py-3 ${n?"text-darkGray font-normal":"border-b-2 border-black"}`,children:"지난 주문 내역"})]}),n?a.orderId?e.jsxs("div",{className:"flex flex-col w-full h-dvh gap-14",children:[e.jsxs("div",{className:"flex w-full h-[15%] justify-center items-end text-primary text-2xl font-semibold tracking-widest",children:[e.jsx("div",{}),e.jsx("span",{children:"예약중"})]}),e.jsxs("div",{className:"flex flex-col w-full h-[25%] px-10 gap-5",children:[e.jsx("span",{className:"mb-2",children:"매장 정보"}),e.jsxs("div",{className:"flex flex-col w-full h-full px-4 justify-between",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("span",{className:"text-xl",children:a.restaurantName}),e.jsx("span",{className:"text-darkGray",children:a.categoryName})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("span",{className:"text-darkGray",children:"주문일시"}),e.jsx("span",{children:f(a.orderDate).format("YYYY-MM-DD")})]}),a.orderDetails.map(s=>e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("span",{children:s.menuName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{children:[s.menuCount,"개"]}),e.jsxs("span",{children:[s.menuPrice.toLocaleString("ko"),"원"]})]})]},s.menuId)),e.jsxs("div",{onClick:u,className:"flex w-full items-center justify-center gap-6 cursor-pointer",children:[e.jsx("span",{children:"총 가격"}),e.jsxs("span",{className:"text-2xl",children:[a.totalMenuCost.toLocaleString("ko"),"원"]})]})]})]}),e.jsxs("div",{className:"flex flex-col w-full h-[30%] px-10 gap-5",children:[e.jsx("span",{className:"mb-2",children:"예약자 정보"}),e.jsxs("div",{className:"flex flex-col w-full h-full px-4 justify-between",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"이름"}),e.jsx("span",{children:a.reservationUserName})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"핸드폰 번호"}),e.jsx("span",{children:a.reservationUserPhone})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"인원"}),e.jsx("span",{})]}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("span",{className:"flex w-[25%] mr-4 text-darkGray justify-end",children:"예약시간"}),e.jsx("span",{children:a.reservationTime})]})]})]})]}):e.jsxs("div",{className:"flex flex-col w-full h-dvh justify-center items-center gap-3",children:[e.jsx(b,{className:"text-8xl text-darkGray"}),e.jsx("span",{className:"text-2xl text-darkGray",children:"진행 중인 주문이 없습니다"}),e.jsxs("div",{onClick:()=>c(!1),className:"flex items-center gap-1 mt-3 text-xl border border-darkGray px-3 py-1 rounded-lg bg-white cursor-pointer",children:["지난 주문 내역 보기",e.jsx(N,{})]})]}):e.jsx("div",{className:"flex flex-col w-full h-dvh justify-start items-center gap-5 mt-20 scrollbar-hide",children:m.map((s,l)=>e.jsxs("div",{className:"w-full h-1/4 bg-white shadow-lg border-y border-y-gray",children:[e.jsxs("div",{className:"w-full h-1/4 flex justify-between items-center px-5 py-3",children:[e.jsx("span",{className:"text-darkGray",children:f(s.createdAt).format("YYYY-MM-DD")}),e.jsx("span",{className:"font-semibold",children:s.reservationYn>0?"예약주문":"현장결제"})]}),e.jsxs("div",{className:"w-full h-2/4 flex justify-start items-center gap-5 px-5",children:[e.jsx("img",{src:s.pic===null?"/restaurant_default.png":`${v}/pic/restaurant/${s==null?void 0:s.restaurantId}/${s==null?void 0:s.pic}`,alt:"식당이미지",className:"w-16 h-16 rounded-xl border border-neutral-200 object-cover shadow-sm"}),e.jsxs("div",{className:"flex flex-col w-[60%]",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-2xl",children:[e.jsx("span",{children:s.restaurantName}),e.jsx(g,{})]}),e.jsxs("div",{className:"flex items-center gap-5 mt-1 justify-between",children:[s.pastDtoList.map(r=>e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("span",{className:"text-nowrap",children:r.menuName}),e.jsxs("span",{children:[r.menuCount,"개"]})]},r.menuId)),e.jsxs("span",{className:"flex text-nowrap gap-2 items-center",children:[e.jsx("span",{className:"text-darkGray",children:"총 가격"}),e.jsxs("span",{className:"text-lg",children:[s.menuTotalPrice.toLocaleString("ko-KR"),"원"]})]})]})]})]}),e.jsx("div",{className:"flex justify-center h-1/4",children:e.jsx("button",{onClick:()=>i("/user/review"),className:"w-1/4 h-2/3 flex px-4 py-1 border border-darkGray rounded-sm text-nowrap items-center justify-center hover:bg-primary hover:text-white",children:"리뷰 작성"})})]},l))}),e.jsx(k,{})]})};export{$ as default};
