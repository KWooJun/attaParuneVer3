import{u as B,c as m,d as k,r as D,j as e,k as $,m as A,h as F,U as T,e as p,f as w,S as E}from"./index-CQbk2HOI.js";import{o as I,c as L,a as h,b as R}from"./index.esm-89j8rvzM.js";import{u as z}from"./index.esm-BppKtBuT.js";import{L as O,H as P,C as V,F as Y,T as q,I as f,S as x,Y as g,b as H}from"./loginStyle-DEwExm5v.js";const Z=L({newUpw:h().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:h().required("비밀번호 확인을 입력해주세요.").oneOf([R("newUpw")],"비밀번호가 일치하지 않습니다.")});function J(){var d,u;const o=B(),[j,C]=m.useState(!1),t=k(D),{register:a,handleSubmit:v,formState:{errors:n},watch:c}=z({mode:"onChange",resolver:I(Z)}),S=async i=>{try{const s=F();console.log(s),t===T?(await p.put("/api/user/v3/upw",i,{headers:{Authorization:`Bearer ${s}`}}),w.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(r=>{r.isConfirmed&&o("/user")})):t===E&&(await p.put("/api/admin/v3/upw",i,{headers:{Authorization:`Bearer ${s}`}}),w.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(r=>{r.isConfirmed&&o("/store")}))}catch(s){console.log(s)}},b=i=>{C(s=>!s),S({newUpw:i.newUpw})},y=c("newUpw"),U=c("pwConfirm"),l=y&&U;return m.useEffect(()=>{console.log(t)},[]),e.jsxs("div",{children:[e.jsxs(O,{style:{position:"relative"},children:[e.jsx(P,{children:e.jsx(V,{children:e.jsx($,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>o(-1)})})}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:v(b),children:[e.jsx(q,{children:"비밀번호 변경"}),e.jsxs(f,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호",...a("newUpw")}),e.jsx(g,{children:(d=n.newUpw)==null?void 0:d.message})]}),e.jsxs(f,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호 확인",...a("pwConfirm")}),e.jsx(g,{children:(u=n.pwConfirm)==null?void 0:u.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(H,{type:"submit",style:{backgroundColor:l?"#6F4CDB":"#ddd"},disabled:!l,children:"확인"})})]})})]}),j&&e.jsx(A,{})]})}export{J as default};
