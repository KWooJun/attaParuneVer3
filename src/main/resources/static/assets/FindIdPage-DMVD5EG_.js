import{u as D,r as I,a as B,j as e,L as $,b as h,S as f}from"./index-XkiSkCIq.js";import{o as F,c as L,a as x}from"./index.esm-kZtGv46w.js";import{u as k}from"./index.esm-j2erOJPr.js";import{I as R}from"./index-Cu020-X3.js";import{L as T,H as E,C as V,T as O,F as U,I as p,S as g,Y as j,a as Y}from"./loginStyle-DMumf38V.js";import{r as q,U as A,S as H}from"./roleAtom-ClRng8Ap.js";import"./iconBase-DXw1Gjh5.js";const _=L({name:x().required("이름은 필수입니다.").min(2,"이름은 최소 2자 이상이어야 합니다."),email:x().required("이메일은 필수입니다.").email("올바른 이메일 형식이 아닙니다.")});function Q(){var d,u;const a=D(),[S,t]=I.useState(!1),r=B(q),{register:o,handleSubmit:v,formState:{errors:n},watch:l,setValue:m}=k({mode:"onChange",resolver:F(_)}),C=async i=>{try{r===A?await h.get(`/api/user/find-id?name=${i.name}&email=${i.email}`):r===H&&await h.get(`/api/admin/find-id?name=${i.name}&email=${i.email}`),f.fire({title:`${i.email} 이메일로 아이디가 전송되었습니다.`,icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(s=>{s.isConfirmed&&a("/auth")})}catch(s){f.fire({title:"이름과 이메일이 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),m("name",""),m("email",""),t(!1),console.log(s)}},w=i=>{console.log(i),t(s=>!s),C(i)},y=l("name"),b=l("email"),c=y&&b;return e.jsxs("div",{children:[e.jsxs(T,{style:{position:"relative"},children:[e.jsx(E,{children:e.jsx(V,{children:e.jsx(R,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>a(-1)})})}),e.jsx(O,{children:"아이디 찾기"}),e.jsx(U,{children:e.jsxs("form",{onSubmit:v(w),children:[e.jsxs(p,{children:[e.jsx(g,{type:"text",placeholder:"이름",...o("name")}),e.jsx(j,{children:(d=n.name)==null?void 0:d.message})]}),e.jsxs(p,{children:[e.jsx(g,{type:"email",placeholder:"이메일",...o("email")}),e.jsx(j,{children:(u=n.email)==null?void 0:u.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(Y,{type:"submit",style:{backgroundColor:c?"#6F4CDB":"#ddd"},disabled:!c,children:"확인"})})]})})]}),S&&e.jsx($,{})]})}export{Q as default};
