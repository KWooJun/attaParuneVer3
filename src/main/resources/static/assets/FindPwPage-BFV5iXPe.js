import{u as b,r as D,a as B,j as i,L as F,b as d,S as u}from"./index-XkiSkCIq.js";import{o as I,c as L,a as h}from"./index.esm-kZtGv46w.js";import{u as k}from"./index.esm-j2erOJPr.js";import{I as R}from"./index-Cu020-X3.js";import{L as T,H as E,C as P,F as $,T as O,I as f,S as p,Y as x,a as U}from"./loginStyle-DMumf38V.js";import{r as V,U as Y,S as A}from"./roleAtom-ClRng8Ap.js";import"./iconBase-DXw1Gjh5.js";const H=L({id:h().min(6,"최소 6자 이상 작성해야 합니다.").max(12,"최대 12자까지 작성 가능합니다."),email:h().required("이메일은 필수입니다.").email("올바른 이메일 형식이 아닙니다.")});function K(){var c,m;const t=b(),[j,g]=D.useState(!1),a=B(V),{register:r,handleSubmit:w,formState:{errors:o},watch:n}=k({mode:"onChange",resolver:I(H)}),S=async s=>{try{a===Y?(await d.put("/api/user/find-passowrd",s),u.fire({title:`${s.email}로 비밀번호가 전송되었습니다.`,icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(e=>{e.isConfirmed&&t("/auth")})):a===A&&(await d.put("/api/admin/find-passowrd",s),u.fire({title:`${s.email}로 비밀번호가 전송되었습니다.`,icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(e=>{e.isConfirmed&&t("/auth")}))}catch(e){console.log(e)}},v=s=>{g(e=>!e),S(s)},C=n("id"),y=n("email"),l=C&&y;return i.jsxs("div",{children:[i.jsxs(T,{style:{position:"relative"},children:[i.jsx(E,{children:i.jsx(P,{children:i.jsx(R,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>t(-1)})})}),i.jsx($,{children:i.jsxs("form",{onSubmit:w(v),children:[i.jsx(O,{children:"비밀번호 찾기"}),i.jsxs(f,{children:[i.jsx(p,{type:"text",placeholder:"아이디",...r("id")}),i.jsx(x,{children:(c=o.id)==null?void 0:c.message})]}),i.jsxs(f,{children:[i.jsx(p,{type:"email",placeholder:"이메일",...r("email")}),i.jsx(x,{children:(m=o.email)==null?void 0:m.message})]}),i.jsx("div",{style:{marginLeft:20,marginRight:20},children:i.jsx(U,{type:"submit",style:{backgroundColor:l?"#6F4CDB":"#ddd"},disabled:!l,children:"확인"})})]})})]}),j&&i.jsx(F,{})]})}export{K as default};
