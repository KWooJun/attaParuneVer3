import{c as n,w as g,u as b,p as m,a0 as w,j as e,x as v,ae as N,a2 as y}from"./index-DA5DsCSi.js";import{F as I}from"./index-CNlTsVLy.js";import{M as k}from"./MenuBar-CXWIXhqi.js";import{I as A}from"./ImgPreview-C8NtP1DR.js";import{p as M}from"./purify.es-DhD2mIk-.js";import"./index-DVVTntrl.js";import"./index-Cn9Q-GYp.js";import"./index-CCNUIWMt.js";const S=()=>{const[i,d]=n.useState(null),[s,p]=n.useState([]),x=g(),f=b();n.useEffect(()=>{const r={page:1,size:15};try{(async()=>{const a=await m.get("/api/user/v3/review",{params:r,headers:{Authorization:`Bearer ${x}`}});console.log("서버에서 받아온 데이터 : ",a.data.resultData);const c=a.data.resultData.map(t=>({...t,createdAt:w(t.createdAt).format("YYYY-MM-DD")}));p([...c])})()}catch(l){console.log(l)}},[]);const u=async r=>{const l={orderId:r};try{const a=await m.delete("/api/user/v3/review",{params:l,headers:{Authorization:`Bearer ${x}`}})}catch(a){console.log(a)}},h=r=>{console.log("미리보기 : ",r),d(r)},j=r=>{f(`/user/restaurant/detail/${r}`)};return e.jsxs("div",{className:"flex flex-col w-full h-dvh",children:[e.jsxs("div",{className:"flex w-full px-3 py-5 justify-between items-center border-b-2 border-gray border-opacity-70 bg-white",children:[e.jsx("span",{onClick:()=>f("/user/userInfo"),className:"flex w-[10%] justify-center text-2xl cursor-pointer",children:e.jsx(v,{})}),e.jsx("span",{className:"text-xl font-semibold tracking-wider",children:"내가 쓴 리뷰"}),e.jsx("span",{className:"flex w-[10%] justify-center text-lg",children:" "})]}),s.length===0?e.jsx("div",{className:"flex w-full h-full justify-center text-xl pt-40",children:"아직 작성한 리뷰가 없습니다"}):s==null?void 0:s.map((r,l)=>{var a,c;return e.jsxs("div",{className:"flex flex-col px-10 py-4 gap-2",children:[e.jsxs("div",{onClick:()=>j(r.restaurantId),className:"flex items-center gap-1 text-lg cursor-pointer",children:[e.jsx("span",{children:r.restaurantName}),e.jsx(N,{className:"font-semibold"})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("span",{className:"flex items-center",children:[...Array(5)].map((t,o)=>e.jsx(I,{className:o<r.rating?"text-yellow":"text-gray"},o))}),e.jsx("span",{className:"text-sm",children:r.createdAt})]}),(a=s==null?void 0:s.reviewPic)==null?void 0:a.map((t,o)=>e.jsx("div",{className:"flex w-full cursor-pointer",children:e.jsx("img",{src:`${REVIEW_IMAGE_URL}/${s.orderId}/${t}`,alt:"",className:"flex w-1/3",onClick:()=>h(`${REVIEW_IMAGE_URL}/${s.orderId}/${t}`)})},o)),e.jsx("div",{className:"flex w-full",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:M.sanitize(String(r.reviewText))}})}),e.jsx("div",{className:"flex w-full gap-4 items-center",children:(c=r.menuName)==null?void 0:c.map((t,o)=>e.jsx("span",{className:"flex px-2 py-1 border bg-white rounded-xl",children:t},o))}),e.jsx("div",{className:"flex w-full justify-end items-center",children:e.jsxs("div",{onClick:()=>u(r.orderId),className:"flex items-center cursor-pointer gap-1",children:[e.jsx(y,{}),e.jsx("span",{children:"삭제"})]})}),r.commentCreatedAt&&e.jsxs("div",{className:"flex w-full gap-3",children:[e.jsx("img",{src:"/restaurant_default.png",alt:"",className:"flex w-10 h-10 object-cover border rounded-full"}),e.jsx("div",{className:"flex flex-col border w-full",children:e.jsxs("div",{className:`relative bg-white border border-black\r
                after:content-[''] after:absolute after: after:border-solid after:border-transparent after:h-0 after:w-0 after:right-full after:top-1/2 after:mt-[-10px] after:border-r-[#ffffff]\r
                before:content-[''] before:absolute before: before:border-solid before:border-transparent before:h-0 before:w-0 before:right-full before:top-5 before:border-[9px] before:mt-[-11px] before:border-r-black`,children:[e.jsxs("div",{className:"flex items-center p-4 gap-4",children:[e.jsx("span",{children:"사장님"}),e.jsx("span",{className:"text-sm",children:r.createdAt})]}),e.jsx("div",{className:"flex p-4",children:e.jsx("span",{children:r.commentText})})]})})]})]},l)}),e.jsx(k,{}),i&&e.jsx(A,{image:i,onClose:()=>d(null)})]})};export{S as default};
