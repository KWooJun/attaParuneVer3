import{u as T,l as d,z as F,B as E,D as A,r as u,x as B,v as U,j as s,t as H,U as m,w as r,E as N,g as x,G as f,h as _}from"./index-BEM99ApS.js";import{u as O}from"./index.esm-CxUxhHPv.js";import{L as M,H as P,C as V,T as Y,b as z,R as G,F as q,I as j,S as w,a as J,c as i}from"./loginStyle-CDRQEueO.js";function ss(){const n=T(),[K,g]=d(F),[Q,S]=d(E),[W,y]=d(A),[t,p]=u.useState({id:"",pw:""}),[h,I]=u.useState(!1),D=sessionStorage.getItem("userId"),v=sessionStorage.getItem("restaurantId"),{handleSubmit:C}=O(),o=B(U),b=()=>{o===m?n("/user"):o===r&&n("/store")},L=async()=>{try{if(o===m){const e=(await x.post("/api/user/sign-in",t)).data.resultData;y({companyId:e.companyId,companyName:e.companyName,email:e.email,name:e.name,phone:e.phone,pic:e.pic,point:e.point,roleId:e.roleId,uid:e.uid,userId:e.userId}),console.log(e);const l=e.userId||D,c=e.accessToken;window.sessionStorage.setItem("userId",l),f(c),g(!0)}else if(o===r){const a=await x.post("/api/admin/sign-in",t);console.log(a.data.resultData);const e=a.data.resultData,l=e.restaurantId||v,c=e.adminId,R=e.accessToken;window.sessionStorage.setItem("adminId",c),window.sessionStorage.setItem("restaurantId",l),f(R),S(!0)}g(!0),b()}catch(a){_.fire({title:"아이디와 비밀번호가 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),console.log(a)}},k=()=>{L()};return u.useEffect(()=>{t.id&&t.pw?I(!0):I(!1)},[t]),s.jsxs(M,{children:[s.jsx(P,{children:s.jsx(V,{children:s.jsx(H,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>n("/")})})}),s.jsxs(Y,{children:[s.jsx(z,{src:"/logo.png",alt:"로고"}),s.jsx(G,{children:o===m?"사용자":o===r?"사장님":o===N?"회사":""})]}),s.jsx(q,{children:s.jsxs("form",{onSubmit:C(k),children:[s.jsx(j,{children:s.jsx(w,{type:"text",placeholder:"아이디",value:t.id,onChange:a=>p({...t,id:a.target.value})})}),s.jsx(j,{children:s.jsx(w,{type:"password",value:t.pw,placeholder:"비밀번호 (8-16자)",onChange:a=>p({...t,pw:a.target.value})})}),s.jsx("div",{style:{marginLeft:20,marginRight:20},children:s.jsx(J,{type:"submit",style:{backgroundColor:h?"#6F4CDB":"#ddd"},disabled:!h,children:"로그인"})})]})}),s.jsx(i,{onClick:()=>n("/auth/findid"),children:"아이디 찾기"}),s.jsx(i,{style:{color:"#bababa"},children:"I"}),s.jsx(i,{onClick:()=>n("/auth/findpw"),children:"비밀번호 찾기"}),o===r&&s.jsxs(s.Fragment,{children:[s.jsx(i,{style:{color:"#bababa"},children:"I"}),s.jsx(i,{style:{marginRight:25},onClick:()=>n("/auth/policy"),children:"회원가입"})]})]})}export{ss as default};
