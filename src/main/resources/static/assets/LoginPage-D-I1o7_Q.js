import{u as A,R as u,l as U,i as B,b as H,c as m,d as N,e as _,r as M,j as e,L as O,H as Y,f as P,I as V,T as q,g as z,h as G,U as g,S as p,C as I,a as h,F as J,k as D,m as y,n as K,o as w,p as d,s as c,q as Q}from"./index-C7IDMRLB.js";function ss(){const n=A(),[W,x]=u(U),[X,v]=u(B),[Z,k]=u(H),[o,S]=m.useState({id:"",pw:""}),[f,j]=m.useState(!1),C=sessionStorage.getItem("userId"),T=sessionStorage.getItem("restaurantId"),{handleSubmit:L}=N(),a=_(M),b=()=>{a===g?n("/user"):a===p?n("/store"):a===I?n("/company"):a===h&&n("/admin")},R=async()=>{try{if(a===g){const s=(await d.post("/api/user/sign-in",o)).data.resultData;k({companyId:s.companyId,companyName:s.companyName,email:s.email,name:s.name,phone:s.phone,pic:s.pic,point:s.point,roleId:s.roleId,uid:s.uid,userId:s.userId}),console.log(s);const i=s.userId||C,r=s.accessToken;window.sessionStorage.setItem("userId",i),c(r),x(!0)}else if(a===p){const t=await d.post("/api/admin/sign-in",o);console.log(t.data.resultData);const s=t.data.resultData,i=s.divisionId||T,r=s.adminId,l=s.coalitionState,F=s.accessToken;window.sessionStorage.setItem("adminId",r),window.sessionStorage.setItem("restaurantId",i),window.sessionStorage.setItem("coalitionState",l),c(F),v(!0)}else if(a===I){const t=await d.post("/api/admin/sign-in",o);console.log(t.data.resultData);const s=t.data.resultData,i=s.adminId,r=s.divisionId,l=s.accessToken;window.sessionStorage.setItem("adminId",i),window.sessionStorage.setItem("companyId",r),c(l)}else if(a===h){const t=await d.post("/api/admin/sign-in",o);console.log(t.data.resultData);const s=t.data.resultData,i=s.adminId,r=s.accessToken;window.sessionStorage.setItem("adminId",i),c(r)}x(!0),b()}catch(t){Q.fire({title:"아이디와 비밀번호가 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),console.log(t)}},E=()=>{R()};return m.useEffect(()=>{o.id&&o.pw?j(!0):j(!1)},[o]),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx(P,{children:e.jsx(V,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>n("/")})})}),e.jsxs(q,{children:[e.jsx(z,{src:"/logo.png",alt:"로고"}),e.jsx(G,{children:a===g?"사용자":a===p?"사장님":a===I?"회사":a===h?"시스템":""})]}),e.jsx(J,{children:e.jsxs("form",{onSubmit:L(E),children:[e.jsx(D,{children:e.jsx(y,{type:"text",placeholder:"아이디",value:o.id,onChange:t=>S({...o,id:t.target.value})})}),e.jsx(D,{children:e.jsx(y,{type:"password",value:o.pw,placeholder:"비밀번호 (8-16자)",onChange:t=>S({...o,pw:t.target.value})})}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(K,{type:"submit",style:{backgroundColor:f?"#6F4CDB":"#ddd"},disabled:!f,children:"로그인"})})]})}),e.jsx(w,{onClick:()=>n("/auth/findid"),children:"아이디 찾기"}),e.jsx(w,{style:{color:"#bababa"},children:"I"}),e.jsx(w,{onClick:()=>n("/auth/findpw"),children:"비밀번호 찾기"})]})}export{ss as default};
