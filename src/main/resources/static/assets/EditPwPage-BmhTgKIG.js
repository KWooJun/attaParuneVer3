import{u as b,r as m,D,z as $,j as e,I as k,i as A,g as F,U as I,c as p,d as w,B as T}from"./index-ji0Yrnpj.js";import{o as z,c as E,a as h,b as L}from"./index.esm-D8A7WmYZ.js";import{u as R}from"./index.esm-Lv2zPOY3.js";import{L as O,H as P,C as V,F as Y,T as q,I as f,S as x,Y as g,a as H}from"./loginStyle-QJIAXPef.js";const Z=E({newUpw:h().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:h().required("비밀번호 확인을 입력해주세요.").oneOf([L("newUpw")],"비밀번호가 일치하지 않습니다.")});function J(){var d,u;const o=b(),[j,C]=m.useState(!1),t=D($),{register:a,handleSubmit:v,formState:{errors:n},watch:c}=R({mode:"onChange",resolver:z(Z)}),S=async i=>{try{const s=F();console.log(s),t===I?(await p.put("/api/user/upw",i,{headers:{Authorization:`Bearer ${s}`}}),w.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(r=>{r.isConfirmed&&o("/user")})):t===T&&(await p.put("/api/admin/upw",i,{headers:{Authorization:`Bearer ${s}`}}),w.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(r=>{r.isConfirmed&&o("/store")}))}catch(s){console.log(s)}},y=i=>{C(s=>!s),S({newUpw:i.newUpw})},B=c("newUpw"),U=c("pwConfirm"),l=B&&U;return m.useEffect(()=>{console.log(t)},[]),e.jsxs("div",{children:[e.jsxs(O,{style:{position:"relative"},children:[e.jsx(P,{children:e.jsx(V,{children:e.jsx(k,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>o(-1)})})}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:v(y),children:[e.jsx(q,{children:"비밀번호 변경"}),e.jsxs(f,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호",...a("newUpw")}),e.jsx(g,{children:(d=n.newUpw)==null?void 0:d.message})]}),e.jsxs(f,{children:[e.jsx(x,{type:"password",placeholder:"새 비밀번호 확인",...a("pwConfirm")}),e.jsx(g,{children:(u=n.pwConfirm)==null?void 0:u.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(H,{type:"submit",style:{backgroundColor:l?"#6F4CDB":"#ddd"},disabled:!l,children:"확인"})})]})})]}),j&&e.jsx(A,{})]})}export{J as default};
